Что выведет программа? Объяснить вывод программы. Объяснить как работают defer’ы и их порядок вызовов.

```go
package main
 
import (
    "fmt"
)

// шаг 2 - работа test()
func test() (x int) {
// 2: деферим функцию, включающую именованный параметр

    // шаг 3
    defer func() {
    // 3: увеличиваем x на 1
        x++
    // 3: передаем управление функции main()
    }()

// 2: присваиваем x
    x = 1
// 2: возвращаем данные, которые лежат в ячейке памяти x (при этом их можно менять в defer)
// 2: вызываем анонимную функцию в defer и шаг 3
    return
}
 
// шаг 4
func anotherTest() int {
// 4: объявляем переменную x
    var x int
//деферим функцию, включающую переменную

    // шаг 5
    defer func() {
    // 5: увеличиваем переменную x на 1
        x++
    // 5: передаем управление функции main()
    }()

// 4: присваиваем x
    x = 1
// 4: возвращаем значение x как константу (при этом их нельзя менять в defer)
// 4: вызываем анонимную функцию в defer и шаг 5
    return x
}
 
// шаг 1
func main() {
// 1: вызов test() и шаг 2
// 1: out <- "2/n"
    fmt.Println(test())

// 1: вызов anotherTest() и шаг 4
// 1: out <- "1/n"
    fmt.Println(anotherTest())
}
```

Ответ:
```
2
1

```

defer срабатывает перед тем, как функция возвращает управление вызвавшей её функции,
то есть после выполнения ключегого слова return. При этом если функция возвращает
именованную переменную, defer может изменять значение, которое вернется в вызвавшую
функцию, также можно работать с локальными переменными, но если они возвращаются, то
на возвращаемое значение повлиять уже не удастся.

Резюмируя, defer вызывается после вычисления результата возвращаемого значения, но
до его фактического возврата из функции.
